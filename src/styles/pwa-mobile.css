/* PWA Mobile Specific Styles */

/* Ensure PWA looks exactly like mobile view */
@media (display-mode: standalone) {
  /* Remove any browser UI elements */
  body {
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }

  /* Ensure mobile viewport behavior */
  html, body {
    width: 100%;
    height: 100%;
    overflow-x: hidden;
  }

  /* Mobile-like status bar */
  .navbar {
    padding-top: calc(1rem + env(safe-area-inset-top));
  }

  /* Ensure touch-friendly sizes */
  button, a, input, select, textarea {
    min-height: 44px;
    min-width: 44px;
  }

  /* Hide desktop-only elements */
  .desktop-only {
    display: none !important;
  }

  /* Force mobile layout */
  .container, .container-fluid {
    max-width: 100% !important;
    padding-left: 1rem;
    padding-right: 1rem;
  }

  /* Mobile navigation styles */
  .navbar-collapse {
    position: fixed;
    top: 0;
    left: -100%;
    width: 80%;
    height: 100vh;
    background: white;
    z-index: 1050;
    transition: left 0.3s ease;
    overflow-y: auto;
  }

  .navbar-collapse.show {
    left: 0;
  }

  /* Mobile card styles */
  .card {
    border-radius: 12px;
    margin-bottom: 1rem;
  }

  /* Mobile table styles */
  .table-responsive {
    -webkit-overflow-scrolling: touch;
  }

  /* Mobile form styles */
  .form-control, .form-select {
    font-size: 16px; /* Prevent zoom on iOS */
    border-radius: 8px;
    padding: 0.75rem;
  }

  /* Mobile button styles */
  .btn {
    border-radius: 8px;
    font-weight: 500;
    padding: 0.75rem 1.5rem;
  }

  /* Bottom navigation safe area */
  .bottom-nav {
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* Ensure proper scrolling */
  .main-content {
    height: calc(100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom));
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }
}

/* iOS specific PWA styles */
@supports (-webkit-touch-callout: none) {
  @media (display-mode: standalone) {
    /* iOS status bar handling */
    body {
      padding-top: constant(safe-area-inset-top);
      padding-top: env(safe-area-inset-top);
    }

    /* Prevent rubber band scrolling */
    html {
      position: fixed;
      height: 100%;
      overflow: hidden;
    }

    body {
      position: fixed;
      height: 100%;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
    }
  }
}

/* Android specific PWA styles */
@media (display-mode: standalone) and (max-width: 768px) {
  /* Android navigation bar color */
  body::after {
    content: '';
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    height: env(safe-area-inset-bottom);
    background: #ffffff;
    z-index: -1;
  }
}

/* Ensure consistent font sizes in PWA */
@media (display-mode: standalone) {
  html {
    font-size: 16px !important;
  }

  /* Prevent text size adjustment */
  * {
    -webkit-text-size-adjust: none;
    -moz-text-size-adjust: none;
    -ms-text-size-adjust: none;
    text-size-adjust: none;
  }
}

/* PWA loading states */
@media (display-mode: standalone) {
  /* Loading skeleton for offline mode */
  .skeleton {
    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: loading 1.5s infinite;
  }

  @keyframes loading {
    0% {
      background-position: 200% 0;
    }
    100% {
      background-position: -200% 0;
    }
  }
}

/* Force mobile viewport in PWA */
@media (display-mode: standalone) {
  @viewport {
    width: device-width;
    zoom: 1.0;
    user-zoom: fixed;
  }

  @-ms-viewport {
    width: device-width;
    zoom: 1.0;
    user-zoom: fixed;
  }
}
